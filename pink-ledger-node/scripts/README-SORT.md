# 分类排序功能使用说明

## 功能概述

已为分类管理添加了排序功能，用户可以通过拖拽来调整分类的显示顺序。

## 数据库迁移

首次使用前，需要运行数据库迁移脚本添加 `sortOrder` 字段：

```bash
node scripts/add-sort-order-field.js
```

该脚本会：
1. 检查 `sortOrder` 字段是否已存在
2. 如果不存在，添加该字段
3. 为现有分类设置默认排序值

## API 接口

### 更新分类排序

**接口**: `POST /categories/order`

**请求体**:
```json
{
  "categoryIds": [1, 3, 2, 5, 4]
}
```

**说明**: `categoryIds` 数组包含分类ID，按新的排序顺序排列。

**响应**:
```json
{
  "code": 200,
  "msg": "排序更新成功"
}
```

## 前端功能

在分类管理页面（`/pages/category/category`）：
- 每个分类项左侧显示拖拽手柄（三条横线图标）
- 长按并拖动分类项可以调整顺序
- 拖拽过程中会显示视觉反馈
- 松开手指后自动保存新顺序

## 注意事项

1. 排序是按分类类型（收入/支出）分别管理的
2. 系统分类和用户自定义分类都可以排序
3. 新创建的分类会自动排在最后
4. 排序值从 1 开始，数字越小越靠前


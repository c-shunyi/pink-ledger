# Pink Ledger 使用指南

## 快速开始

### 第一步：启动后端服务

```bash
cd pink-ledger-node
pnpm install
pnpm run dev
```

后端服务将在 `http://localhost:3000` 启动。

### 第二步：配置前端

1. 打开 `config/index.js`
2. 确认 `baseUrl` 配置正确：
   ```javascript
   baseUrl: 'http://localhost:3000/api'
   ```

### 第三步：运行前端

使用 HBuilderX 打开 `pink-ledger-uniapp` 目录，点击运行到浏览器。

## 功能使用说明

### 1. 注册与登录

首次使用需要注册账号：
- 用户名：3-50个字符
- 密码：至少6位
- 昵称：可选

注册成功后会自动登录并跳转到首页。

### 2. 记账流程

#### 添加支出
1. 点击首页右下角的"+"按钮
2. 默认在"支出"标签页
3. 输入金额
4. 选择分类（如：餐饮、交通等）
5. 选择日期（默认今天）
6. 选择账户类型（现金、支付宝、微信、银行卡）
7. 添加备注（可选）
8. 点击"完成"

#### 添加收入
1. 点击首页右下角的"+"按钮
2. 切换到"收入"标签页
3. 按相同步骤操作

### 3. 查看账单

#### 首页账单列表
- 显示当月的所有账单
- 按日期分组显示
- 顶部显示本月收入、支出和结余
- 支持筛选：全部、支出、收入
- 支持下拉刷新
- 支持上拉加载更多

#### 账单详情
- 点击任意账单可查看详情
- 可以编辑或删除账单

### 4. 统计分析

点击底部"统计"标签：
- 切换月度/年度统计
- 查看总收入、总支出、结余
- 查看各分类的支出/收入明细
- 查看各分类占比

### 5. 分类管理

在"我的"页面点击"分类管理"：
- 查看系统预设分类
- 添加自定义分类
- 编辑自定义分类（名称、图标、颜色）
- 删除自定义分类（系统分类不可删除）

系统预设分类：
- 支出：餐饮、交通、购物、娱乐、医疗、住房、学习、其他
- 收入：工资、兼职、投资、红包、其他

### 6. 个人设置

在"我的"页面：
- 查看个人信息
- 编辑资料（昵称、头像）
- 退出登录

## 常见问题

### Q1: 登录提示"网络请求失败"？
**A:** 请确认：
1. 后端服务已启动
2. `config/index.js` 中的 `baseUrl` 配置正确
3. 如果是真机调试，将 `localhost` 改为电脑的 IP 地址

### Q2: 注册时提示"用户名已存在"？
**A:** 该用户名已被使用，请更换其他用户名。

### Q3: Token 过期怎么办？
**A:** Token 默认有效期为 7 天，过期后会自动跳转到登录页，重新登录即可。

### Q4: 删除分类提示失败？
**A:** 
- 系统分类不能删除
- 如果该分类下有账单记录，也不能删除
- 需要先删除或修改相关账单的分类

### Q5: TabBar 图标不显示？
**A:** 
1. 检查 `static/tabbar/` 目录下是否有图标文件
2. 如果没有图标，可以注释掉 `pages.json` 中的 iconPath 配置
3. 参考 `static/tabbar/README.md` 添加图标

### Q6: 真机调试无法连接后端？
**A:** 
1. 确保手机和电脑在同一局域网
2. 将 `baseUrl` 中的 `localhost` 改为电脑的局域网 IP
3. 例如：`http://192.168.1.100:3000/api`
4. 在后端 `.env` 文件中可能需要配置允许的域名

## 技术支持

如有问题，请检查：
1. 控制台是否有错误信息
2. 网络请求是否正常
3. 后端服务是否正常运行

## 数据说明

- 所有数据存储在本地 SQLite 数据库
- Token 和用户信息存储在本地 Storage
- 退出登录会清除本地 Token 和用户信息
- 数据库文件位置：`pink-ledger-node/database.sqlite`

## 备份建议

定期备份数据库文件以防数据丢失：
```bash
cp pink-ledger-node/database.sqlite pink-ledger-node/database.sqlite.backup
```

